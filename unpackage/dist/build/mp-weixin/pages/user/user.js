(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/user"],{"026a":function(e,t,i){"use strict";i.r(t);var n=i("f1e2"),o=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,function(){return n[e]})}(s);t["default"]=o.a},"0285":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.certificates=1},e.e1=function(t){e.certificates=2})},o=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return o})},"02f6":function(e,t,i){"use strict";(function(e){i("9bf5"),i("921b");n(i("66fd"));var t=n(i("b3d3"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])},1174:function(e,t,i){},b3d3:function(e,t,i){"use strict";i.r(t);var n=i("0285"),o=i("026a");for(var s in o)"default"!==s&&function(e){i.d(t,e,function(){return o[e]})}(s);i("f505");var a=i("2877"),r=Object(a["a"])(o["default"],n["a"],n["b"],!1,null,null,null);t["default"]=r.exports},f1e2:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i("3613"),o=i("29c1"),s={data:function(){return{userForm:{name:"",user_head:"",avator:"",phone:"",sex:1,school:1,start_time:"2016-08",end_time:"",hobby:"",education:"",studentPhoto:"",graduationPhoto:""},defaultAvator:"https://hudongmsite.oss-cn-hangzhou.aliyuncs.com/meeting/basicYrC5Sh1570383607306.png",userInfo:{},isEdit:!1,imgList:[],imgList1:[],imgList2:[],index:-1,xueliList:["专科","本科","硕士","博士"],certificates:1}},onLoad:function(){this.getUserInfo(),this.isEdit=!1},onShow:function(){this.isEdit||this.getUserInfo()},methods:{showExample:function(){e.previewImage({urls:["http://qiniutest001.fensibox.com/cotenant_20191219_190935_26742"],current:"http://qiniutest001.fensibox.com/cotenant_20191219_190935_26742"})},pickerChange:function(e){this.index=e.detail.value,this.userForm.degree=this.xueliList[this.index]},loginOut:function(){e.showModal({title:"提示",content:"确定退出吗？",cancelText:"取消",confirmText:"确定",success:function(t){t.confirm&&(e.showToast({icon:"none",title:"退出成功"}),e.removeStorage({key:"Authentication",success:function(e){}}),setTimeout(function(){e.reLaunch({url:"/pages/login"})},300))}})},changeSex:function(e){this.userForm.sex=e.detail.value},startDateChange:function(e){this.userForm.start_time=e.detail.value},endDateChange:function(e){this.userForm.end_time=e.detail.value},chooseImage:function(){var t=this;console.log("chooseImagechooseImage"),e.chooseImage({count:1,sizeType:["original"],sourceType:["album"],success:function(e){console.log("successsuccesssuccess");var i=e.tempFilePaths[0];t.$api.getQnToken().then(function(e){o.upload(i,function(e){console.log(666),console.log(e.imageURL),t.imgList.push("http://".concat(e.imageURL)),console.log(9999),console.log(t.imgList[0])},function(e){},{region:"SCN",domain:"qiniutest001.fensibox.com",key:e.data.key,uptoken:e.data.uptoken})}).catch(function(e){})},fail:function(e){console.log("chooseImage fail",e)}})},chooseImage1:function(){var t=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(e){var i=e.tempFilePaths[0];console.log("filePath",i),t.$api.getQnToken().then(function(e){o.upload(i,function(e){t.imgList1.push("http://".concat(e.imageURL))},function(e){},{region:"SCN",domain:"qiniutest001.fensibox.com",key:e.data.key,uptoken:e.data.uptoken})}).catch(function(e){})},fail:function(e){console.log("chooseImage fail",e)}})},chooseImage2:function(){var t=this;if(!this.isEdit)return!1;e.chooseImage({count:1,sizeType:["original"],sourceType:["album"],success:function(e){var i=e.tempFilePaths[0];t.$api.getQnToken().then(function(e){o.upload(i,function(e){t.userForm.user_head="http://".concat(e.imageURL)},function(e){},{region:"SCN",domain:"qiniutest001.fensibox.com",key:e.data.key,uptoken:e.data.uptoken})}).catch(function(e){})},fail:function(e){console.log("chooseImage fail",e)}})},ViewImage:function(t){e.previewImage({urls:this.imgList,current:t.currentTarget.dataset.url})},ViewImage1:function(t){e.previewImage({urls:this.imgList1,current:t.currentTarget.dataset.url})},DelImg:function(t){var i=this;e.showModal({title:"提示",content:"确定要删除吗？",cancelText:"再看看",confirmText:"删除",success:function(e){e.confirm&&i.imgList.splice(t.currentTarget.dataset.index,1)}})},DelImg1:function(t){var i=this;e.showModal({title:"提示",content:"确定要删除吗？",cancelText:"再看看",confirmText:"删除",success:function(e){e.confirm&&i.imgList1.splice(t.currentTarget.dataset.index,1)}})},DelImg2:function(t){var i=this;e.showModal({title:"提示",content:"确定要删除吗？",cancelText:"再看看",confirmText:"删除",success:function(e){e.confirm&&i.imgList2.splice(t.currentTarget.dataset.index,1)}})},cancelSave:function(){this.isEdit=!1,this.getUserInfo()},saveUserInfo:function(){this.saveUserInfoAjax()},saveUserInfoAjax:function(){var t=this;if(this.userForm.nick_name)if(this.userForm.name)if(this.userForm.college){var i="";this.userForm.end_time&&(i=n.format(this.userForm.end_time));var o={nick_name:this.userForm.nick_name,user_name:this.userForm.name,user_head:this.userForm.user_head,sex:this.userForm.sex,college:this.userForm.college,degree:this.xueliList[this.index],start_time:n.format(this.userForm.start_time),end_time:i,id_card_url:this.imgList[0]||"",diploma_url:this.imgList1[0]||"",interest:this.userForm.hobby,mobile:""};this.$api.updateUserInfo(o).then(function(i){e.showToast({icon:"none",title:"保存成功"}),t.isEdit=!1}).catch(function(e){})}else e.showToast({icon:"none",title:"学校不能为空"});else e.showToast({icon:"none",title:"姓名不能为空"});else e.showToast({icon:"none",title:"昵称不能为空"})},editUser:function(){var e=this;this.userForm.degree?this.xueliList.forEach(function(t,i){t==e.userForm.degree&&(e.index=i)}):this.index=-1,this.isEdit=!0},getUserInfo:function(){var e=this;this.$api.getUserInfo().then(function(t){e.userForm.nick_name=t.data.nick_name,e.userForm.name=t.data.user_name,e.userForm.user_head=t.data.user_head,e.userForm.sex=t.data.sex,e.userForm.college=t.data.college,e.userForm.degree=t.data.degree,e.userForm.start_time=t.data.start_time,e.userForm.start_time=n.toStringDate(t.data.start_time),e.userForm.end_time=n.toStringDate(t.data.end_time),e.imgList=t.data.id_card_url&&t.data.id_card_url.split()||[],e.imgList1=t.data.diploma_url&&t.data.diploma_url.split()||[],e.userForm.hobby=t.data.interest,t.data.id_card_url?e.certificates=1:t.data.diploma_url&&(e.certificates=2)}).catch(function(t){e.userForm={name:"",user_head:"",avator:"",phone:"",sex:1,school:1,start_time:"2016-08",end_time:"",hobby:"",education:"",studentPhoto:"",graduationPhoto:""}})}}};t.default=s}).call(this,i("543d")["default"])},f505:function(e,t,i){"use strict";var n=i("1174"),o=i.n(n);o.a}},[["02f6","common/runtime","common/vendor"]]]);