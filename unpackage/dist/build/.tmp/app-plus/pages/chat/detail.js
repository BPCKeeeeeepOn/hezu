(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/chat/detail"],{"0916":function(t,e,n){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("6050"));function i(t){return t&&t.__esModule?t:{default:t}}var s={globalData:{goeasy:null},data:function(){return{InputBottom:0,userInfo:{},chatDetail:{},sendContent:"",scrollTop:0,scrollAnimation:!1,recordTis:"手指上滑 取消发送",recording:!1,popupLayerClass:"",scrollToView:"",id:"",defaultAvator:"https://hudongmsite.oss-cn-hangzhou.aliyuncs.com/meeting/basicYrC5Sh1570383607306.png"}},onLoad:function(e){var n=this;this.id=e.id,this.getMessageFn(this.id),t.getStorage({key:"userInfo",success:function(t){n.userInfo=JSON.parse(t.data),n.userInfo&&n.userInfo.user_id||n.$store.dispatch("getuserinfo")}}),this.initGoeasy()},onShow:function(){this.scrollTop=9999999;this.$options.globalData;this.$options.globalData.goeasy||this.initGoeasy()},onHide:function(){this.$options.globalData.goeasy&&(this.$options.globalData.goeasy=null)},methods:{initGoeasy:function(){var e=this,n=this.$options.globalData;n.goeasy=new a.default({host:"hangzhou.goeasy.io",appkey:"BC-0a302f5f67764730b09e4be87bf06f0f",onConnected:function(){},onDisconnected:function(){console.log(o("连接断开！"," at pages\\chat\\detail.vue:111"))},onConnectFailed:function(t){console.log(o("连接失败或错误！"," at pages\\chat\\detail.vue:114"))}}),n.goeasy.subscribe({channel:this.userInfo.user_id,onMessage:function(n){e.getMessageFn(e.id),t.vibrateLong()}})},goMyRent:function(e){this.$api.getGroupId({userId:e}).then(function(e){e.data&&e.data.group_id&&t.showModal({title:"提示",content:"是否跳转至参团详情？",cancelText:"取消",confirmText:"确定",success:function(n){n.confirm&&t.navigateTo({url:"/pages/home/detail?id=".concat(e.data.group_id)})}}),console.log(o("========",e," at pages\\chat\\detail.vue:154"))}).catch(function(t){})},openDrawer:function(){this.popupLayerClass="showLayer"},hideDrawer:function(){var t=this;this.popupLayerClass="",setTimeout(function(){t.hideMore=!0,t.hideEmoji=!0},150)},textareaFocus:function(){"showLayer"==this.popupLayerClass&&0==this.hideMore&&this.hideDrawer()},BackPage:function(){t.navigateBack({delta:1})},sendMessage:function(){var t=this;if(!this.sendContent)return!1;this.$api.sendChat({receive_user_id:this.id,content:this.sendContent}).then(function(e){t.sendContent="",t.getMessageFn(t.id)}).catch(function(t){})},getMessageFn:function(t){var e=this;this.$api.getMessage({receive_user_id:t}).then(function(t){t.data.chatMessageVMList.forEach(function(t){t.send_user_id==e.userInfo.user_id?t.type=1:t.type=2}),e.chatDetail=t.data,e.$nextTick(function(){this.scrollTop=this.scrollTop+1,this.$nextTick(function(){this.scrollAnimation=!0})})}).catch(function(t){})},InputFocus:function(t){t.detail.height;console.log(o(plus.screen.resolutionHeight," at pages\\chat\\detail.vue:228")),console.log(o(plus.android.invoke(plus.android.currentWebview(),"getHeight")," at pages\\chat\\detail.vue:229")),console.log(o(plus.navigator.getStatusbarHeight()," at pages\\chat\\detail.vue:230")),this.InputBottom=t.detail.height},InputBlur:function(t){this.InputBottom=0},discard:function(){}}};e.default=s}).call(this,n("6e42")["default"],n("0de9")["default"])},"0d33":function(t,e,n){"use strict";var o=n("b23c"),a=n.n(o);a.a},"21e6":function(t,e,n){"use strict";n.r(e);var o=n("0916"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);e["default"]=a.a},"574e":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a})},"6aca":function(t,e,n){"use strict";(function(t){n("9bf5"),n("921b");o(n("66fd"));var e=o(n("d128"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},b23c:function(t,e,n){},d128:function(t,e,n){"use strict";n.r(e);var o=n("574e"),a=n("21e6");for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);n("0d33");var s=n("2877"),u=Object(s["a"])(a["default"],o["a"],o["b"],!1,null,null,null);e["default"]=u.exports}},[["6aca","common/runtime","common/vendor"]]]);